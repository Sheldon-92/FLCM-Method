# Story 6.3: LinkedIn Professional Formatter

## Status
Approved

## Story
**As a** user,  
**I want** content formatted for LinkedIn,  
**so that** it establishes thought leadership.

**Estimated Time:** 4-5 hours

## Acceptance Criteria
1. Professional tone calibration
2. Industry insight highlighting
3. Career relevance emphasis
4. Network engagement optimization
5. Professional storytelling structure
6. LinkedIn algorithm optimization

## Tasks / Subtasks
- [ ] Implement professional tone calibration (AC: 1)
  - [ ] Create LinkedInToneAnalyzer class
  - [ ] Remove casual language
  - [ ] Enhance professional vocabulary
  - [ ] Add authority indicators
  - [ ] Balance confidence without arrogance
  - [ ] Maintain approachability
- [ ] Build industry insight highlighter (AC: 2)
  - [ ] Extract key industry points
  - [ ] Add relevant statistics
  - [ ] Include market trends
  - [ ] Reference thought leaders
  - [ ] Connect to business impact
  - [ ] Add actionable takeaways
- [ ] Implement career relevance emphasis (AC: 3)
  - [ ] Identify career development angles
  - [ ] Add professional growth insights
  - [ ] Include skill development tips
  - [ ] Connect to job market trends
  - [ ] Add success metrics
  - [ ] Include case studies
- [ ] Optimize for network engagement (AC: 4)
  - [ ] Create engagement hooks
  - [ ] Add discussion prompts
  - [ ] Include polls/questions
  - [ ] Encourage comments
  - [ ] Add connection invitations
  - [ ] Include share triggers
- [ ] Build storytelling structure (AC: 5)
  - [ ] Implement STAR format (Situation, Task, Action, Result)
  - [ ] Add personal anecdotes
  - [ ] Include lessons learned
  - [ ] Create narrative arc
  - [ ] Add emotional touchpoints
  - [ ] Include success stories
- [ ] Implement algorithm optimization (AC: 6)
  - [ ] Optimize post length (1300-2000 characters)
  - [ ] Add dwell time elements
  - [ ] Include native video prompts
  - [ ] Optimize hashtag usage (3-5)
  - [ ] Add early engagement hooks
  - [ ] Format for mobile reading

## Dev Notes

### LinkedIn Optimization Architecture:
```typescript
interface LinkedInAdapter {
  adapt(content: ContentDraft): LinkedInPost;
  optimizeTone(text: string): string;
  extractInsights(content: string): ProfessionalInsight[];
  generateEngagement(post: LinkedInPost): EngagementElements;
}

interface LinkedInPost {
  headline: string;
  body: string;
  hashtags: string[];
  callToAction: string;
  format: 'article' | 'post' | 'document';
  estimatedReach: number;
  professionalScore: number;
}

class LinkedInFormatter {
  async format(draft: ContentDraft): Promise<LinkedInPost> {
    // Professional tone adjustment
    const professionalContent = await this.adjustTone(draft.content);
    
    // Structure for LinkedIn
    const structured = this.applyLinkedInStructure(professionalContent);
    
    // Add engagement elements
    const engaging = this.addEngagementHooks(structured);
    
    // Optimize for algorithm
    const optimized = this.optimizeForAlgorithm(engaging);
    
    return {
      headline: this.generateHeadline(draft),
      body: optimized,
      hashtags: this.selectHashtags(draft),
      callToAction: this.createCTA(draft),
      format: this.determineFormat(draft),
      estimatedReach: this.estimateReach(optimized),
      professionalScore: this.scoreProfessionalism(optimized)
    };
  }
}
```

### Professional Tone Calibration:
```typescript
class LinkedInToneAnalyzer {
  calibrate(text: string): string {
    let professional = text;
    
    // Replace casual phrases
    const casualToProfessional = {
      'guys': 'professionals',
      'stuff': 'materials',
      'things': 'elements',
      'awesome': 'excellent',
      'cool': 'innovative',
      'basically': 'fundamentally'
    };
    
    for (const [casual, pro] of Object.entries(casualToProfessional)) {
      professional = professional.replace(
        new RegExp(casual, 'gi'),
        pro
      );
    }
    
    // Add authority indicators
    professional = this.addAuthorityMarkers(professional);
    
    // Enhance with data
    professional = this.injectStatistics(professional);
    
    return professional;
  }
  
  private addAuthorityMarkers(text: string): string {
    const markers = [
      'In my experience',
      'Research indicates',
      'Industry data shows',
      'Best practices suggest',
      'Leading organizations'
    ];
    
    // Strategically insert authority markers
    return this.insertMarkers(text, markers);
  }
}
```

### Industry Insight Enhancement:
```typescript
interface ProfessionalInsight {
  type: 'trend' | 'statistic' | 'benchmark' | 'prediction';
  content: string;
  source?: string;
  relevance: number;
}

class InsightEnhancer {
  enhance(content: string, industry: string): string {
    const insights = this.gatherIndustryInsights(industry);
    
    // Insert relevant statistics
    const withStats = this.addStatistics(content, insights);
    
    // Add trend analysis
    const withTrends = this.addTrendAnalysis(withStats, industry);
    
    // Include benchmarks
    const withBenchmarks = this.addBenchmarks(withTrends, industry);
    
    return withBenchmarks;
  }
  
  private gatherIndustryInsights(industry: string): ProfessionalInsight[] {
    // Industry-specific insights
    const insightDatabase = {
      'tech': [
        { type: 'trend', content: 'AI adoption increased 270% in 2024' },
        { type: 'statistic', content: '67% of companies prioritize digital transformation' }
      ],
      'marketing': [
        { type: 'benchmark', content: 'Top performers achieve 3.5x ROI' },
        { type: 'prediction', content: 'Personalization will drive 80% of interactions by 2025' }
      ]
    };
    
    return insightDatabase[industry] || [];
  }
}
```

### Engagement Optimization:
```typescript
interface EngagementElements {
  hook: string;
  questions: string[];
  pollOptions?: string[];
  discussionPrompts: string[];
  sharePrompt: string;
}

class EngagementOptimizer {
  optimize(post: LinkedInPost): LinkedInPost {
    // Add opening hook
    const hook = this.generateHook(post.body);
    
    // Insert engagement questions
    const questions = this.createQuestions(post.body);
    
    // Add discussion prompts
    const prompts = this.generateDiscussionPrompts(post.body);
    
    // Create viral elements
    const viral = this.addViralElements(post.body);
    
    return {
      ...post,
      body: `${hook}\n\n${viral}\n\n${questions.join('\n')}\n\n${prompts}`
    };
  }
  
  private generateHook(content: string): string {
    const hooks = [
      '🚀 [Surprising statistic or fact]',
      '💡 The one thing that changed my perspective:',
      '📊 After analyzing 100+ companies, here\'s what I found:',
      '🎯 Unpopular opinion:',
      '✨ 3 years ago, I wish someone had told me:'
    ];
    
    return this.selectBestHook(hooks, content);
  }
}
```

### LinkedIn Algorithm Optimization:
```typescript
interface LinkedInMetrics {
  dwellTime: number;        // Target: >30 seconds
  engagementRate: number;   // Target: >3%
  clickThroughRate: number; // Target: >0.5%
  shareRate: number;        // Target: >0.3%
  commentRate: number;      // Target: >1.5%
}

class LinkedInAlgorithmOptimizer {
  optimize(post: LinkedInPost): LinkedInPost {
    // Optimal length: 1300-2000 characters for maximum reach
    const optimizedLength = this.optimizeLength(post.body, 1300, 2000);
    
    // Add dwell time elements (targeting 30+ second read time)
    const withDwellTime = this.addDwellTimeElements(optimizedLength);
    
    // Format for mobile (80% of LinkedIn traffic)
    const mobileOptimized = this.formatForMobile(withDwellTime);
    
    // Hashtag optimization (3-5 hashtags for best performance)
    const hashtags = this.optimizeHashtags(post.hashtags);
    
    // Early engagement optimization (first hour critical)
    const frontLoaded = this.frontLoadEngagement(mobileOptimized);
    
    // Calculate professional score
    const professionalScore = this.calculateProfessionalScore(frontLoaded);
    
    return {
      ...post,
      body: frontLoaded,
      hashtags: hashtags,
      professionalScore,
      estimatedMetrics: this.predictMetrics(frontLoaded, hashtags)
    };
  }
  
  private calculateProfessionalScore(content: string): number {
    let score = 0;
    
    // Authority indicators (25 points)
    const authorityMarkers = ['research shows', 'data indicates', 'in my experience'];
    if (authorityMarkers.some(marker => content.toLowerCase().includes(marker))) score += 25;
    
    // Professional vocabulary (20 points)
    const professionalTerms = ['leverage', 'optimize', 'strategic', 'innovative'];
    score += Math.min(20, professionalTerms.filter(term => 
      content.toLowerCase().includes(term)).length * 5);
    
    // Industry insights (20 points)
    if (this.containsIndustryInsights(content)) score += 20;
    
    // Actionable advice (15 points)
    if (this.containsActionableAdvice(content)) score += 15;
    
    // Statistics/data (10 points)
    if (/\d+%|\d+x|\$\d+/.test(content)) score += 10;
    
    // Professional tone (10 points)
    if (!this.containsCasualLanguage(content)) score += 10;
    
    return Math.min(100, score);
  }
  
  private predictMetrics(content: string, hashtags: string[]): LinkedInMetrics {
    const baseEngagement = 2.0; // Industry average
    let multiplier = 1.0;
    
    // Content quality multipliers
    if (content.includes('?')) multiplier += 0.3; // Questions increase engagement
    if (content.length > 1500) multiplier += 0.2; // Longer content gets more shares
    if (hashtags.length >= 3) multiplier += 0.15; // Proper hashtag usage
    
    return {
      dwellTime: Math.min(60, 25 + (content.length / 50)),
      engagementRate: baseEngagement * multiplier,
      clickThroughRate: 0.4 * multiplier,
      shareRate: 0.25 * multiplier,
      commentRate: 1.2 * multiplier
    };
  }
  
  private addDwellTimeElements(text: string): string {
    // Add elements that increase reading time
    const elements = [
      '• Bullet points for scanning',
      '📌 Visual markers',
      '1️⃣ 2️⃣ 3️⃣ Numbered lists',
      '━━━━━ Visual breaks',
      '👇 Read more indicators'
    ];
    
    return this.strategicallyInsert(text, elements);
  }
  
  private formatForMobile(text: string): string {
    // Short paragraphs (2-3 lines max)
    // Line breaks for readability
    // Emoji for visual breaks
    return text.split('.').map(sentence => 
      sentence.length > 100 ? 
        sentence.match(/.{1,100}/g).join('\n') : 
        sentence
    ).join('.\n\n');
  }
}
```

### Professional Storytelling Structure:
```typescript
interface ProfessionalStory {
  situation: string;
  task: string;
  action: string;
  result: string;
  lesson: string;
}

class StoryStructurer {
  structure(content: string): ProfessionalStory {
    return {
      situation: 'Early in my career at [Company]...',
      task: 'I was tasked with [specific challenge]...',
      action: 'My approach was to [specific actions]...',
      result: 'This led to [quantifiable outcome]...',
      lesson: 'The key takeaway for professionals is...'
    };
  }
}
```

### Hashtag Strategy:
```typescript
const linkedInHashtags = {
  broad: ['#Leadership', '#Innovation', '#FutureOfWork'],
  specific: ['#DigitalTransformation', '#AIStrategy', '#TechLeadership'],
  trending: ['#LinkedInLearning', '#CareerGrowth', '#ProfessionalDevelopment']
};

// Use 3-5 hashtags: 1-2 broad, 2-3 specific
```

### Testing
**Testing Framework:** Jest
**Test File Location:** `.flcm-core/tests/adapter/`

**Unit Tests:**
- Tone professionalization
- Insight extraction
- Engagement element generation
- Algorithm compliance
- Hashtag optimization

**Test Content:**
```
tests/fixtures/linkedin/
├── casual-draft.md
├── technical-content.md
├── story-based.md
└── thought-leadership.md
```

**Integration Tests:**
- Full content adaptation pipeline (draft → LinkedIn post)
- Engagement prediction accuracy testing
- Algorithm optimization effectiveness measurement
- Professional score calculation validation
- Multi-format content adaptation (article, post, document)
- Performance metrics prediction vs actual results
- A/B testing framework for optimization strategies
- Industry-specific adaptation scenarios

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-12-28 | 1.0 | Initial story creation | Bob (SM) |

## Dev Agent Record

### Agent Model Used
_To be filled by dev agent_

### Debug Log References
_To be filled by dev agent_

### Completion Notes List
_To be filled by dev agent_

### File List
_To be filled by dev agent_

## QA Results
_To be filled by QA agent_